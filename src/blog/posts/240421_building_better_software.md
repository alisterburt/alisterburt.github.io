---
date: 2024-04-21
---

# Scientific Software: How to Build it Better

Lego is great. Why is it so great? 
- Lego is great because the pieces are simple. 
- Lego is great because you know how it works.
- Lego is great because it fits together so well.

Stacking rocks is hard. Why is it so hard?
- Stacking rocks hard because rocks come in all shapes and sizes.
- Stacking rocks is hard because you're not immediately sure how to do it best.
- Stacking rocks is hard because it requires balance and precision.

<p align="center" width="50%">
<img alt="an elaborate lego structure and some impressive rock towers" src="https://private-user-images.githubusercontent.com/7307488/324618639-096e2c17-c735-427f-9956-6ba5b2d6d51c.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTM4MjE3NzQsIm5iZiI6MTcxMzgyMTQ3NCwicGF0aCI6Ii83MzA3NDg4LzMyNDYxODYzOS0wOTZlMmMxNy1jNzM1LTQyN2YtOTk1Ni02YmE1YjJkNmQ1MWMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDQyMiUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA0MjJUMjEzMTE0WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MzIwNzczMTAwYmVlODdlNDgwNDA5NjYxN2FlYTZhZDFjZTkxNWUyYTQ3YmYwMTQzYjBhYjQ3ZDhjZGM3Yjk0YiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.PxS6lTrXanL2PEEuWdKYYYoKweNWnpZJfheC8NdxsaA">
</p>

You can build [almost anything](https://www.youtube.com/watch?v=QwXK4e4uqXY) with Lego.
The shapes of the rocks you find dictates what you can build with them. 
It's fun to build lego with friends. 
Stacking rocks with friends could be fun, but it's more of a solo activity.

Where was I going with this... oh yeah, scientific software!

## The Problem with Scientific Software

Scientific software often sucks. I'm here to tell you it's because a lot of academic software is a stack 
of rocks built by a single person. Their last job cared about the height of their 
stack of rocks. Their current job? Well, they're carefully building a new stack of rocks on a different beach. 
Even if they care about their old stack of rocks... keeping it standing doesn't pay the bills any more.
Even if they like that people go to look at their stack of rocks... building it higher doesn't pay the bills any more.

## How to Build Scientific Software Better

Scientific software could be so much better. How we build matters.
We should be aiming to build our scientific software like we build with lego.
We use the pieces we have. Those pieces are tried, tested and solid. 
If we're doing something totally out there, maybe we could 3D print a custom brick or two.
You probably shouldn't be doing that much though.

<figure markdown="span">
  ![Snake tail for lego minifigures](https://private-user-images.githubusercontent.com/7307488/324623695-bdcaab8c-207c-4fc5-93ab-185b3c7db315.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTM4MjMzODAsIm5iZiI6MTcxMzgyMzA4MCwicGF0aCI6Ii83MzA3NDg4LzMyNDYyMzY5NS1iZGNhYWI4Yy0yMDdjLTRmYzUtOTNhYi0xODViM2M3ZGIzMTUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDQyMiUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA0MjJUMjE1ODAwWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NWI2MjY5ZmM5N2NjMTNkNjMyYjUyNDRlMjUxM2RiYThiYzVhYjRmNDE4MjkwYWNiNTQ2MTgwOWE2ZGMwODAzZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.ZSTFp3KHJoRXPZwnDumZr_F9Sfc9lvo51eXPqBFAG2o){ width="300" }
  <figcaption>A custom 3D printed snake tail for your Lego minifigures from <a href="https://www.thingiverse.com/thing:1802944">thingiverse</a> 
</figcaption>
</figure>

The great thing about Lego is that the interfaces between pieces are well defined and easy to understand.
If the architect of the Lego city we live in leaves town, someone could probably build that new hospital us poor minifigures have 
been crying out for. It's hard to use someone elses stack of rocks to help you build that new hospital.

## Concrete Advice

Let's provide some actual advice rather than beat this analogy further...

### Build From the Bottom

Package small, useful modules whilst building your projects. 
You won't do it later. Your foundations must be solid. 
Other people can help you maintain them if they understand them.
Other people will use your work if it's easier than writing it themselves.

### Build Together

Lone geniuses can build great things. They can't and won't maintain them forever. 
You should try build with other people. You can build bigger than you ever dreamed of. 
You will learn. You will have fun.

### Build to Standards

If there is an accepted way of doing things and no good reason to do them differently, don't. 
Nobody wants to spend time deciphering your mess, don't force them to unless it's absolutely necessary.


## Closing

I feel strongly about this topic. 
I spent literal years trying to cobble together
[an image processing workflow](https://scholar.google.co.uk/citations?view_op=view_citation&hl=en&user=ERGSZbUAAAAJ&citation_for_view=ERGSZbUAAAAJ:W7OEmFMy1HYC)
during my PhD. It was frustrating not having the tools that made what was easy in my head, easy. 
I spoke with many people in the same boat, unable to make the pieces fit together 
because nobody paid attention to the interfaces.

I taught myself Python along the way and built small modules which have been used in a number of cool projects.

[*napari-animation*](https://github.com/napari/napari-animation) was used to make one *Nature*'s "sharpest science shots"
for September 2022.
<iframe src="https://www.nature.com/immersive/d41586-022-03051-6/index.html" width="70%" style="border: 1px solid #464646;" allowfullscreen="" allow="autoplay"></iframe>

[*starfile*](https://github.com/teamtomo/starfile) was used to enable visualisations of cellular architecture in [Molecular Nodes](https://bradyajohnston.github.io/MolecularNodes/).

<video src="https://private-user-images.githubusercontent.com/7307488/324628883-617e1a00-6ddf-4e7b-9875-d91549c3deec.mp4?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTM4MjYwODAsIm5iZiI6MTcxMzgyNTc4MCwicGF0aCI6Ii83MzA3NDg4LzMyNDYyODg4My02MTdlMWEwMC02ZGRmLTRlN2ItOTg3NS1kOTE1NDljM2RlZWMubXA0P1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDQyMiUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA0MjJUMjI0MzAwWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MjAwYTM1NjNkMjIxZmQ1MTBiODEwNjNkNGVmMWM3ZDBhMWY3ZjI4Y2NhMzc1YTc2OGFlZjUwYTVkMzZmNGM1OCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.4ObBdLoHgRqrpkq9TA7cdU8BpERl_pL923_xgl59V-c" width="70%" controls></video>

I've worked on a few projects that aren't built the way I would like and it's a lot harder to make simple things work.

There is a better way!



